<!DOCTYPE html>
<html lang="de">

<!-- TODO: Add homework.title to en and de language files -->

<head>
  <%- include("./partials/baseHead.ejs") %>


  <title data-lang-content="homework title">Hausaufgaben</title>
  <script src="homework.js" defer></script>
  <script src="/js/partials/untis.js"></script>
  <link rel="stylesheet" href="homework.css">
  <link rel="stylesheet" href="/css/untis.css">
  <script src="/js/partials/autocomplete.js"></script>
  <link rel="stylesheet" href="/css/autocomplete.css">
</head>

<body>
  <%- include('./partials/base.ejs') %>


  <button type="button" id="taskSubmit" onclick="openCreateTask()">Create Task</button>

  <div class="calendar" id="calendar">
    <!-- Calendar days will be dynamically generated -->
  </div>

  <div id="dayView">
    <div class="dateDisplay">
      <h1 id="dayView-Date">DD MM DD</h1>
      <h1 id="dayView-dayCount">(in 5 Tagen)</h1>
    </div>
    <div class="taskCount">
      <p class="count" id="dayTaskCount">5</p>
      <p>Aufgaben sind an diesm Tag fällig.</p>
    </div>
  </div>
  <div id="taskView">
    <div id="taskElementPrefab" class="taskElement">
      <div class="header">
        <p class="subject">Fach</p>
        <p class="teacher">Lehrer</p>
      </div>
      <hr>
      <p class="content">Die zu bearbeitende Aufgabe</p>
      <div class="meta-info">
        <div class="author-info">
          <p class="author-name">Pius</p>
          <div class="profilePicture">
            <img class="profilePicture image" src="https://storage.liscitransmitter.live/profile-pictures/397w9ZcGyWt9LE6ERMyl.jpeg" alt="Pius">
          </div>
        </div>
      </div>
    </div>
    <div class="taskElement">test elem</div>
    <div class="taskElement">test elem</div>
    <div class="taskElement">test elem</div>
  </div>

  <div class="modal-template" id="timeTableModal">
    <button type="button" onclick="untisPreviousWeek()"><</button>
    <button type="button" onclick="untisNextWeek()">></button>
    <button type="button" onclick="thisWeek()">Today</button>
    <h1>Wähle die Stunde aus</h1>
    <div class="timetable"></div>
  </div>

  <div class="modal-template" id="taskModal">
    <h1>Neue Aufgabe eintragen</h1>
    <select id="classSelector" class="online-only" required>
      <option selected="selected">Loading...</option>
    </select>
    <button id="other_select_button" class="hidden" type="button" onclick="showUntisModal()">select</button>
    <select id="untilSelector" class="online-only" required disabled>
      <option>Please select a Subject</option>
    </select>
    <textarea type="text" name="title" id="title" class="online-only" placeholder="Überschrift" oninput="textAreaOnInput(this)" required></textarea>
    <textarea type="text" name="content" id="content" class="online-only" placeholder="Aufgabenbeschreibung" oninput="textAreaOnInput(this, true)" required></textarea>
    <div id="files">
      <input id="file0" class="online-only file_upload" type="file" name="file" accept="*" multiple="">
    </div>
    <button type="button" name="Submit" onclick="submitTask()">Submit</button>
  </div>

</body>

</html>

<script>
  const untisClasses = "<%= untisClasses %>".split(",").map(c => c.trim());
</script>